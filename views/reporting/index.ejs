<% locals.pageTitle = typeof title !== 'undefined' ? title : 'Reports' %>

<header class="py-3 px-6 border-b border-gray-200 bg-white shadow-sm flex-shrink-0">
    <div class="flex items-center justify-between">
        <h2 class="text-lg font-semibold text-gray-800"><%= locals.pageTitle %></h2>
        <%# Add Report Filter buttons/forms later (e.g., Date Range) %>
        <div></div>
    </div>
</header>

<section class="p-6 flex-1 overflow-y-auto space-y-6">
    <% if (typeof reportData !== 'undefined' && reportData) { %>

        <%# --- Warehouse Owner / Admin Reports --- %>
        <% if (['warehouse_owner', 'admin'].includes(reportData.type)) { %>
            <div class="bg-white border rounded-lg shadow-sm p-4">
                <h3 class="text-base font-semibold text-gray-700 mb-3">Sales Summary</h3>
                <dl class="grid grid-cols-1 gap-x-4 gap-y-4 sm:grid-cols-2">
                    <div class="sm:col-span-1">
                        <dt class="text-sm font-medium text-gray-500">Total Revenue (Delivered)</dt>
                        <dd class="mt-1 text-xl font-semibold text-gray-900">₹<%= reportData.totalRevenue?.toFixed(2) || '0.00' %></dd> <%# Add currency symbol %>
                    </div>
                     <%# Add more sales metrics: Avg order value etc. %>
                </dl>
            </div>

             <div class="bg-white border rounded-lg shadow-sm p-4">
                <h3 class="text-base font-semibold text-gray-700 mb-3">Orders by Status</h3>
                <% if (reportData.orderStatusCounts && reportData.orderStatusCounts.length > 0) { %>
                    <ul class="space-y-2">
                        <% reportData.orderStatusCounts.forEach(status => { %>
                            <li class="flex justify-between text-sm">
                                <span class="capitalize font-medium text-gray-600"><%= status._id %>:</span>
                                <span class="font-semibold text-gray-800"><%= status.count %></span>
                            </li>
                        <% }) %>
                    </ul>
                <% } else { %>
                     <p class="text-sm text-gray-500">No order data found.</p>
                <% } %>
            </div>

             <div class="bg-white border rounded-lg shadow-sm p-4">
                <h3 class="text-base font-semibold text-gray-700 mb-3">Inventory Summary</h3>
                <% if (reportData.inventorySummary) { %>
                     <dl class="grid grid-cols-1 gap-x-4 gap-y-4 sm:grid-cols-3">
                         <div class="sm:col-span-1"> <dt class="text-sm font-medium text-gray-500">Total Items</dt> <dd class="mt-1 text-xl font-semibold text-gray-900"><%= reportData.inventorySummary.totalItems %></dd> </div>
                         <div class="sm:col-span-1"> <dt class="text-sm font-medium text-gray-500">Distinct SKUs</dt> <dd class="mt-1 text-xl font-semibold text-gray-900"><%= reportData.inventorySummary.distinctSKUs %></dd> </div>
                         <div class="sm:col-span-1"> <dt class="text-sm font-medium text-gray-500">Total Value</dt> <dd class="mt-1 text-xl font-semibold text-gray-900">₹<%= reportData.inventorySummary.totalValue?.toFixed(2) || '0.00' %></dd> </div>
                          <%# Add Low Stock count later %>
                     </dl>
                <% } else { %>
                    <p class="text-sm text-gray-500">No inventory data found.</p>
                <% } %>
            </div>
            <%# Add Top Items table later %>

        <% } %>

        <%# --- Store Owner / Employee Reports --- %>
        <% if (['store_owner', 'employee'].includes(reportData.type)) { %>
             <div class="bg-white border rounded-lg shadow-sm p-4">
                <h3 class="text-base font-semibold text-gray-700 mb-3">Store Sales</h3>
                <dl>
                     <div class="mb-2"> <dt class="text-sm font-medium text-gray-500">Total Revenue (Delivered)</dt> <dd class="mt-1 text-xl font-semibold text-gray-900">₹<%= reportData.totalRevenue?.toFixed(2) || '0.00' %></dd> </div>
                </dl>
            </div>
             <div class="bg-white border rounded-lg shadow-sm p-4">
                <h3 class="text-base font-semibold text-gray-700 mb-3">Store Orders by Status</h3>
                <% if (reportData.orderStatusCounts && reportData.orderStatusCounts.length > 0) { %> <ul class="space-y-2"> <% reportData.orderStatusCounts.forEach(status => { %> <li class="flex justify-between text-sm"> <span class="capitalize font-medium text-gray-600"><%= status._id %>:</span> <span class="font-semibold text-gray-800"><%= status.count %></span> </li> <% }) %> </ul> <% } else { %> <p class="text-sm text-gray-500">No order data.</p> <% } %>
             </div>
             <div class="bg-white border rounded-lg shadow-sm p-4">
                <h3 class="text-base font-semibold text-gray-700 mb-3">Store Customers</h3>
                <dl>
                    <div class="mb-2"> <dt class="text-sm font-medium text-gray-500">Total Customers</dt> <dd class="mt-1 text-xl font-semibold text-gray-900"><%= reportData.customerCount %></dd> </div>
                </dl>
            </div>
             <%# Add Top selling items for store later %>
        <% } %>

        <%# --- Delivery Partner Reports --- %>
        <% if (reportData.type === 'delivery_partner') { %>
             <div class="bg-white border rounded-lg shadow-sm p-4">
                 <h3 class="text-base font-semibold text-gray-700 mb-3">My Delivery Summary</h3>
                 <% if (reportData.deliveryStatusCounts && reportData.deliveryStatusCounts.length > 0) { %> <ul class="space-y-2"> <% reportData.deliveryStatusCounts.forEach(status => { %> <li class="flex justify-between text-sm"> <span class="capitalize font-medium text-gray-600"><%= status._id %>:</span> <span class="font-semibold text-gray-800"><%= status.count %></span> </li> <% }) %> </ul> <% } else { %> <p class="text-sm text-gray-500">No assigned deliveries found.</p> <% } %>
             </div>
        <% } %>

    <% } else { %>
        <p class="text-gray-600">Could not load report data.</p>
    <% } %>
</section>